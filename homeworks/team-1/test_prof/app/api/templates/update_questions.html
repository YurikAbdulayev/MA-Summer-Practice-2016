<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Профорієнтаційний тест</title>
    <link rel="stylesheet" href="../static/css/main.min.css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:600,400&subset=latin,cyrillic' rel='stylesheet'
          type='text/css'>
</head>
<body>
<div id="admin-content">
    <a href="/login" class="rout-to-main">Головна</a>
    <h1>Створення нового запитання:</h1>
    <div class="new-test">
        <div class="questions">
            <div class="question">
                <p><input type="text" placeholder="Назва запитання"></p>
                <p><input type="text" placeholder="Відповідь" class="input-answer"></p>
                <p><input type="text" placeholder="Відповідь" class="input-answer"></p>
            </div>
        </div>
        <!--<button type="submit" class="button">Створити</button>-->
        <!--<button class="button" onclick="addAnswer()">Додати відповідь</button>-->
        <!--<button class="button" onclick="addQuestion()">Додати запитання</button>-->
    </div>
</div>
<script src="http://code.jquery.com/jquery-1.11.0.js"></script>
<script>
    var out;
    var xmlhttp = new XMLHttpRequest();
    id = "{{t_id}}";


    function parseIds(responseText) {
        var json = JSON.parse(responseText);
        for (i = 0; i < json["list_ids"].length; i++) {
            var idQuestion = json["list_ids"][i]["question_id"];
            var url = "http://127.0.0.1:5000/api/v1.0/question/" + idQuestion;
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
//                    (xmlhttp.responseText);
                }
            };
            xmlhttp.open("GET", url, false);
            xmlhttp.send();
        }
    }
    var url = "http://127.0.0.1:5000/api/v1.0/questions/" + id + "/direction/all";
    xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            parseIds(xmlhttp.responseText);
        }
    };
    xmlhttp.open("GET", url, false);
    xmlhttp.send();

    function addAnswer() {
        var answer = parseInt($(".question").find("p:last"));

        $("div.question").append("<p><input type='text' placeholder='Відповідь' class='input-answer'/></p>");
    }

    function addQuestion() {
        var question = parseInt($(".questions").find("div:last"));
        $(".questions").append("<div class='question'><p><input type='text' placeholder='Назва запитання'></p><p><input type='text' placeholder='Відповідь' class='input-answer'></p><p><input type='text' placeholder='Відповідь' class='input-answer'></p></div>");
    }
</script>
</html>